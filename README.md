# 🏠 Archive Manager: Система управления архивом жильцов

**Версия:** 1.0  
**Дата:** 23.04.2025  
**Язык:** C  
**Интерфейс:** Консольный (CLI)  
**Форматы данных:** `input.txt`, `kodif.txt`, `archive.bin`

---

## 📌 Описание проекта

Система предоставляет функциональный консольный интерфейс для управления архивом жильцов. Данные хранятся в **стеке**, поддерживаются два формата файлов (полный и сокращённый), предусмотрены все операции CRUD (создание, просмотр, изменение, удаление), а также сервисные и аналитические функции.

---

## ✨ Основные возможности

- 📂 **Загрузка данных** из `input.txt` (полный формат) и `kodif.txt` (сокращённый формат)
- 👀 **Просмотр** архива с выбором формата отображения
- ➕ **Добавление** новых жильцов через интерактивный ввод
- 📊 **Аналитика** (только для полного формата):
  - Поиск записей с избыточной площадью
  - Топ-3 квартир с минимальной площадью
- 🛠️ **Сервисные функции**:
  - Очистка архива
  - Сортировка методом Шелла
  - Удаление бинарного файла архива

---

## 🧱 Архитектура системы

- **Stack:** Основная структура хранения данных
- **ArchiveFormat:** Флаг текущего формата архива
- **archive.bin:** Автоматическое сохранение данных в бинарный файл
- **Валидация:** Защита от некорректных операций и неверного ввода

---

## 📁 Поддерживаемые форматы данных

| Формат     | Название файла | Описание                                   |
|------------|----------------|--------------------------------------------|
| Полный     | `input.txt`    | 6 полей, используется для полной аналитики |
| Сокращённый| `kodif.txt`    | 2 поля, базовая информация                 |

---

## 📌 Структура основного меню

```plaintext
[1] Просмотр архива
[2] Загрузка данных
[3] Добавление записей
[4] Анализ данных
[5] Сервисные операции
[0] Выход
```

---

## 🔁 Алгоритм работы

```plaintext
[Инициализация]
    ↓
[Показать меню]
    ↓
[Ввод команды]
    ↓
[Валидация]
    ↓
[Выполнение операции]
    ↓
[Сохранение состояния]
    ↓
[Повтор или Выход]
```

---

## 🛠 Пример использования

```c
int main() {
    mainMenu(); // Запуск главного меню архива
    return 0;
}
```

---

## ⚠️ Важные ограничения

- ❌ Нельзя смешивать форматы `input.txt` и `kodif.txt` в одной сессии
- 📉 Аналитика работает **только** с полным форматом (`input.txt`)
- 📁 Требуется папка `data/` с нужными файлами для старта
- 🛑 Защита от некорректного ввода через `fgets` и проверку `sscanf`

---

## 📂 Структура проекта

```
project/
│
├── data/
│   ├── input.txt
│   └── kodif.txt
│
├── include/
│   ├── menu.h
│   ├── base.h
│   ├── analysis.h
│   ├── archive.h
│   ├── ul.h
│   ├── input.h
│   └── tools.h
│
├── src/
│   ├── menu.c
│   ├── base.c
│   ├── analysis.c
│   ├── archive.c
│   ├── ul.c
│   ├── input.c
│   ├── tools.c
│   └── main.c
│
├── archive.bin
└── README.md
```

---

## 💾 Автосохранение

Все изменения автоматически записываются в `archive.bin` после каждой модификации. Формат сохранения зависит от текущего режима (`input.txt` или `kodif.txt`).

---

## 📌 Зависимости и требования

- **C compiler** (GCC/Clang/MSVC)
- **Созданная папка `data/`** с необходимыми файлами
- **Права на запись** в директорию проекта

---

## 🧑‍💻 Для разработчиков

Ключевые переменные:
- `Stack archive` — контейнер для данных
- `ArchiveFormat currentFormat` — текущий формат

Основные функции реализованы в `menu.h` и `createArchive.c`.

---

## 📎 См. также

- [`base.h`](./include/base.h) — структуры данных и базовые функции
- [`analysis.h`](./include/analysis.h) — модуль аналитики
- [`archive.h`](./include/archive.h) — операции с файлами

---

> Разработано с 💡 вниманием к безопасности, структурности и консольной эстетике.
